{"mappings":"qhBA0CA,IAAIA,cAAJ,EAxBYC,MAAUC,IACrB,MAAMC,EAAM,IAAIC,aAChB,IAAIC,EACAC,GAAY,EAEhB,MAAMC,uBArBmBJ,GACzB,MAAMK,QAAYC,MAAK,4BACjBC,QAAoBF,EAAIE,2BAEJP,EAAIQ,gBAAgBD,GAiB1BE,CAAWT,GAErBD,EAAAW,MACR,KACDX,EAAEY,aAAaZ,EAAEa,YAAab,EAAEc,cAChCd,EAAEe,WAAU,YAGbf,EAAEgB,SAAQ,KACLZ,GACHA,GAAY,EACZD,EAAOc,SAEPd,WA1BgBF,EAAmBiB,GACrC,IAAIf,EAASF,EAAIkB,4BACjBhB,EAAOiB,OAASF,EAChBf,EAAOkB,QAAQpB,EAAIqB,aACnBnB,EAAOoB,QACApB,EAqBIqB,CAAUvB,EAAKI,GACxBD,GAAY","sources":["src/03_sound_key_typed_play.ts"],"sourcesContent":["import p5 from \"p5\";\n\nasync function setupAudio(ctx: AudioContext) {\n\tconst res = await fetch(\"static/maou_cyber_43.mp3\");\n\tconst arrayBuffer = await res.arrayBuffer();\n\t// Web Audio API で使える形式に変換\n\tconst audioBuffer = await ctx.decodeAudioData(arrayBuffer);\n\treturn audioBuffer;\n};\n\nfunction playAudio(ctx: AudioContext, audioBuffer: AudioBuffer) {\n\tlet source = ctx.createBufferSource();\n\tsource.buffer = audioBuffer;\n\tsource.connect(ctx.destination);\n\tsource.start();\n\treturn source;\n};\n\nconst sketch = async (p: p5) => {\n\tconst ctx = new AudioContext();\n\tlet source: AudioBufferSourceNode;\n\tlet isPlaying = false;\n\n\tconst audio = await setupAudio(ctx);\n\n\t/** 初期化 */\n\tp.setup = () => {\n\t\tp.createCanvas(p.windowWidth, p.windowHeight);\n\t\tp.background(\"#131821\");\n\t};\n\n\tp.keyTyped = () => {\n\t\tif (isPlaying) {\n\t\t\tisPlaying = false;\n\t\t\tsource.stop();\n\t\t} else {\n\t\t\tsource = playAudio(ctx, audio);\n\t\t\tisPlaying = true;\n\t\t};\n\t};\n};\n\nnew p5(sketch)"],"names":["$parcel$interopDefault","async","p","ctx","AudioContext","source","isPlaying","audio","res","fetch","arrayBuffer","decodeAudioData","$e7bc2b0153da973a$var$setupAudio","setup","createCanvas","windowWidth","windowHeight","background","keyTyped","stop","audioBuffer","createBufferSource","buffer","connect","destination","start","$e7bc2b0153da973a$var$playAudio"],"version":3,"file":"03_sound_key_typed_play.2badb5dd.js.map"}