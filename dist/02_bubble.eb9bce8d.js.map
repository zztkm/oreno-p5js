{"mappings":"qhBAyGA,IAAIA,cAAJ,EAzFgBC,IAWf,IAAIC,EAAO,GACPC,GALqB,IAOzB,MAAMC,EAAS,KAEI,MAAZC,EAAIJ,EAAEK,UAAY,EAClBC,EAAkBN,EAAEO,WAAaL,EAVf,IAWlBM,EAAIF,EACPN,EAAES,OAAST,EAAEU,MAAQV,EAAEK,QAAO,IAAO,KACrCL,EAAEK,SACCM,EAAIL,EAAkBN,EAAEY,OAASZ,EAAEa,OAASb,EAAEK,QAAO,IAAO,KAAQ,IAC1EJ,EAAQa,KAAI,CACXC,SAAQ,GAAIP,IAAGG,GACfK,KAAMhB,EAAEiB,IAAIb,EAAG,EAAG,EArBJ,KACA,IAqBdc,MAAOlB,EAAEiB,IAAIb,EAAG,EAAG,EApBJ,KACA,KAoBfe,OAAQC,KAAKf,SAAW,MAmChBL,EAAAqB,MACR,KACDrB,EAAEsB,aAAatB,EAAEuB,YAAavB,EAAEwB,eAGfxB,EAAAyB,KAAA,SAEjBzB,EAAEc,OACFd,EAAE0B,WAAW1B,EAAE2B,MA7DK,YA8DpB3B,EAAE4B,UAAU5B,EAAE6B,QAtCd5B,EAAUA,EAAQ6B,QAAQC,GAAMA,EAAEhB,SAASJ,EAAIX,EAAEa,OAASkB,EAAEf,MAAQ,IAwC7Df,EAAQ+B,OAtEC,IAuEf7B,IApCDF,EAAQgC,SAASF,GAAC,CACjBA,EAAEhB,SAASJ,GAAKoB,EAAEb,SAMnBjB,EAAQgC,SAASF,IAEkB,MAA5BG,EAAQlC,EAAEkC,MAAqB,GAAfH,EAAEhB,SAASP,EAAuB,GAAfuB,EAAEhB,SAASJ,GAC9CwB,EAASnC,EAAEiB,IAAIiB,EAAO,EAAG,GAAG,GAAK,IACjCP,EAAQ3B,EAAE2B,MAvCD,WAwCf3B,EAAEoC,OAAOT,GACTI,EAAEZ,OAASnB,EAAEqC,KAAKV,GAAS3B,EAAEsC,OAEmBtC,EAA9CuC,OACDR,EAAEhB,SAASP,EAAIR,EAAEU,MAAQyB,EACzBJ,EAAEhB,SAASJ,EAAIX,EAAEa,OACjBkB,EAAEf,KAAOhB,EAAEU,UAsBbV,EAAEwC,OAGHxC,EAAEyC,WAAU,KACXvC,EAAiBF,EAAEO,YAGpBP,EAAE0C,cAAa,KACd1C,EAAE2C,aAAa3C,EAAEuB,YAAavB,EAAEwB","sources":["src/02_bubble.ts"],"sourcesContent":["import p5 from \"p5\";\n\n/** とりあえず動かしたかったのでここのコードをパクった: https://github.com/ics-creative/210129_p5ts */\n\ntype Bubble = {\n\t/** 位置(画面サイズに対する0~1の相対位置) */\n\tposition: {\n\t\tx: number;\n\t\ty: number;\n\t};\n\tsize: number;\n\tspeed: number;\n\tisFill: boolean;\n};\n\n\nconst sketch = (p: p5) => {\n\n\tconst maxCount = 40;\n\tconst minSize = 0.005;\n\tconst mazSize = 0.2;\n\tconst minSpeed = 0.005;\n\tconst maxSpeed = 0.02;\n\tconst mouseAciveFrames = 120;\n\tconst backgroundColor = \"#121d21\";\n\tconst bubbleColor = \"#e63946\";\n\n\tlet bubbles: Bubble[] = [];\n\tlet lastMouseMoved = -mouseAciveFrames;\n\n\tconst addBubble = () => {\n\t\t// 仮想の奥行きを定義\n\t\tconst z = p.random() ** 3;\n\t\tconst isMousePosition = p.frameCount - lastMouseMoved < mouseAciveFrames;\n\t\tconst x = isMousePosition\n\t\t\t? p.mouseX / p.width + p.random(-0.05, 0.05)\n\t\t\t: p.random()\n\t\tconst y = isMousePosition ? p.mouseY / p.height + p.random(-0.05, 0.05) : 1.2;\n\t\tbubbles.push({\n\t\t\tposition: { x, y },\n\t\t\tsize: p.map(z, 0, 1, minSize, mazSize),\n\t\t\tspeed: p.map(z, 0, 1, minSpeed, maxSpeed),\n\t\t\tisFill: Math.random() > 0.5,\n\t\t});\n\t};\n\n\t/** 画面外に出たバブルを配列から除去する */\n\tconst removeOutBubbles = () => {\n\t\tbubbles = bubbles.filter((b) => b.position.y * p.height + b.size >= 0);\n\t};\n\n\t/** バブルの位置を更新する */\n\tconst updateBubbles = () => {\n\t\tbubbles.forEach((b) => [\n\t\t\tb.position.y -= b.speed,\n\t\t]);\n\t};\n\n\t/** バブルを描画する */\n\tconst drawBubbles = () => {\n\t\tbubbles.forEach((b) => {\n\t\t\t// ノイズを使って左右の揺れの値を作る\n\t\t\tconst noise = p.noise(b.position.x * 20, b.position.y * 20);\n\t\t\tconst xShift = p.map(noise, 0, 1, -15, 15);\n\t\t\tconst color = p.color(bubbleColor);\n\t\t\tp.stroke(color);\n\t\t\tb.isFill ? p.fill(color) : p.noFill;\n\t\t\t// バブルの位置に算出したノイズを加えて円を描画する\n\t\t\tp.circle(\n\t\t\t\tb.position.x * p.width + xShift,\n\t\t\t\tb.position.y * p.height,\n\t\t\t\tb.size * p.width\n\t\t\t);\n\t\t});\n\t};\n\n\n\t/** 初期化 */\n\tp.setup = () => {\n\t\tp.createCanvas(p.windowWidth, p.windowHeight);\n\t};\n\n\t/** フレームごとの描画処理 */\n\tp.draw = () => {\n\t\tp.push();\n\t\tp.background(p.color(backgroundColor));\n\t\tp.blendMode(p.SCREEN);\n\t\tremoveOutBubbles();\n\t\twhile (bubbles.length < maxCount) {\n\t\t\taddBubble();\n\t\t};\n\t\tupdateBubbles();\n\t\tdrawBubbles();\n\t\tp.pop();\n\t};\n\n\tp.mouseMoved = () => {\n\t\tlastMouseMoved = p.frameCount;\n\t};\n\n\tp.windowResized = () => {\n\t\tp.resizeCanvas(p.windowWidth, p.windowHeight);\n\t};\n};\n\nnew p5(sketch)"],"names":["$parcel$interopDefault","p","bubbles","lastMouseMoved","addBubble","z","random","isMousePosition","frameCount","x","mouseX","width","y","mouseY","height","push","position","size","map","speed","isFill","Math","setup","createCanvas","windowWidth","windowHeight","draw","background","color","blendMode","SCREEN","filter","b","length","forEach","noise","xShift","stroke","fill","noFill","circle","pop","mouseMoved","windowResized","resizeCanvas"],"version":3,"file":"02_bubble.eb9bce8d.js.map"}